"use strict";function _classCallCheck(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}var _createClass=function(){function t(t,r){for(var e=0;e<r.length;e++){var n=r[e];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(r,e,n){return e&&t(r.prototype,e),n&&t(r,n),r}}();/**
 * jQloader  v0.1.2
 * @license  MIT
 * Designed  and built by Moer
 * Homepage  https://moerj.github.io/jQloader
 * GitHub    https://github.com/Moerj/jQloader
 */
!function(t){function r(){for(var r=function(r){var e=t(r),n=e.attr("src");n&&!function(){var r=t("<div></div>");e.replaceWith(r),r.loadPage({url:n,history:!1,progress:!1},function(){r.children().eq(0).unwrap()})}()},e=document.getElementsByTagName("jq-include"),n=0;n<e.length;n++)r(e[n])}function e(){var r=history.state,e=document.location.hash.substr(1);if(r){var n=r.url,o=void 0;if(o=t(r.id?"#"+r.id:"jq-router"),!o.length)return;return void o.loadPage({url:n,history:!1,progress:!0,title:r.title})}if(e){var i=t("jq-router");if(!i.length)return;return void i.loadPage({url:e,history:!1,progress:!0})}var s=sessionStorage.getItem("jqRouterReload");s?sessionStorage.removeItem("jqRouterReload"):(sessionStorage.setItem("jqRouterReload",!0),window.location.replace(window.location.href))}var n=function(t){return void 0===t._jQloader&&(t._jQloader=new Map),{get:function(r){return t._jQloader[r]},set:function(r,e){t._jQloader[r]=e},push:function(r,e){void 0===t._jQloader[r]&&(t._jQloader[r]=[]),t._jQloader[r].push(e)}}},o=function(){function r(){_classCallCheck(this,r),this.color="#58a2d1",this.transition="10s width",this.timer=null,this.$progress=t("<span></span>"),this.reset(),t("html").append(this.$progress)}return _createClass(r,[{key:"reset",value:function(){this.$progress.css({backgroundColor:this.color,transition:"none",height:"2px",width:0,position:"fixed",left:0,top:0,zIndex:9999,boxShadow:"1px 1px 2px 0 "+this.color})}},{key:"max",value:function(){return document.body.clientWidth}},{key:"setColor",value:function(t){"string"==typeof t&&(this.color=t)}},{key:"start",value:function(){this.reset(),this.$progress.css({width:this.max(),transition:this.transition})}},{key:"stop",value:function(){this.$progress.css({width:this.$progress.width()})}},{key:"finish",value:function(){var t=this;this.stop(),this.$progress.css({width:this.max(),transition:"0.5s width"}),this.timer||(this.timer=setTimeout(function(){t.timer=null,t.reset()},700))}},{key:"destroy",value:function(){this.$progress.remove(),this.$progress=null}}]),r}();t("body").on("click","a",function(r){var e=r.currentTarget,n=e.getAttribute("load");if(n){r.preventDefault();var o=e.getAttribute("to"),i=void 0,s=!1;return i=t(o?o:"jq-router"),null!=e.getAttribute("strict")&&(s=!0),i.loadPage({url:n,title:e.title,strict:s}),!1}var a=e.hash;if(a){r.preventDefault();var l=a.substr(1),u=t(document.getElementById(l));t("html, body").animate({scrollTop:u.offset().top},300)}}),window.addEventListener("popstate",function(){e()}),t.fn.loadFinish=function(r){var e=t(this);return n(e[0]).push("loadPageCallBacks",r),e},t.fn.loadPage=function(e,o){var i=t(this);if(!i.length)return console.error(i.selector+" not a vaild selector"),i;var s={history:!0,progress:!0,cache:!0,async:!0,title:null,strict:!1};e=t.extend({},s,e);var a=function(e,o){var s={strict:function(){if(e.strict&&o.indexOf("<script")>=0){var t=window.location.host;window.location.reload(t+"/#"+e.url)}return s},history:function(t){function r(){return t.apply(this,arguments)}return r.toString=function(){return t.toString()},r}(function(){if(e.history){var t=e.url;if("./"===e.url.substring(0,2)&&(t=e.url.substring(2)),"jq-router"===i[0].localName)history.pushState({title:e.title,url:e.url},"","#"+t);else{var r=window.location.hash.split("#"),n=r[1];history.pushState({title:e.title,id:i.attr("id"),url:e.url},"","#"+n+"#"+e.url)}}return s}),title:function(){return e.title&&(window.document.title=e.title),s},render:function(){return i.html(o),s},zepto:function(){if("undefined"!=typeof Zepto&&"undefined"==typeof jQuery)for(var r=i.find("script"),e=0;e<r.length;e++){var n=r[e].src;n?t.get(n):t(r[e]).remove()}return s},compile:function(){return r(),s},callbacks:function(){var t=n(i[0]).get("loadPageCallBacks");if(t)for(var r=0;r<t.length;r++)t[r]();return s}};return s};return e.progress&&!e.strict&&t.progressBar.start(),t.ajax({dataType:"html",url:e.url,cache:e.cache,async:e.async,timeout:1e4,success:function(t){a(e,t).strict().history().title().render().zepto().compile().callbacks()},error:function(){console.warn("页面载入失败！")},complete:function(){e.progress&&!e.strict&&t.progressBar.finish(),o&&o()}}),i},t.progressBar||(t.progressBar=new o),t(function(){r(),e()})}($);