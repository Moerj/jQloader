"use strict";function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var _createClass=function(){function t(t,e){for(var r=0;r<e.length;r++){var o=e[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,r,o){return r&&t(e.prototype,r),o&&t(e,o),e}}();/**
 * jQloader v0.0.9
 * @license: MIT
 * Designed and built by Moer
 * github   https://github.com/Moerj/jQloader
 */
!function(t){function e(){for(var e=function(e){var r=t(e),o=r.attr("src");o&&!function(){var e=t("<div></div>");r.replaceWith(e),e.loadPage({url:o,history:!1,progress:!1},function(){e.children().eq(0).unwrap()})}()},r=document.getElementsByTagName("jq-include"),o=0;o<r.length;o++)e(r[o])}function r(){var e=history.state,r=document.location.hash.substr(1);if(e){var o=e.url,n=void 0;if(n=t(e.id?"#"+e.id:"jq-router"),!n.length)return;return void n.loadPage({url:o,history:!1,progress:!1,title:e.title})}if(r){var i=t("jq-router");if(!i.length)return;return void i.loadPage({url:r,history:!1,progress:!0})}var s=sessionStorage.getItem("jqRouterReload");s?sessionStorage.removeItem("jqRouterReload"):(sessionStorage.setItem("jqRouterReload",!0),window.location.replace(window.location.href))}var o=function(t){return void 0===t._jQloader&&(t._jQloader=new Map),{get:function(e){return t._jQloader[e]},set:function(e,r){t._jQloader[e]=r},push:function(e,r){void 0===t._jQloader[e]&&(t._jQloader[e]=[]),t._jQloader[e].push(r)}}},n=function(){function e(){_classCallCheck(this,e),this.color="#58a2d1",this.transition="10s width",this.timer=null,this.$progress=t("<span></span>"),this.reset(),t("html").append(this.$progress)}return _createClass(e,[{key:"reset",value:function(){this.$progress.css({backgroundColor:this.color,transition:"none",height:"2px",width:0,position:"fixed",left:0,top:0,zIndex:9999,boxShadow:"1px 1px 2px 0 "+this.color})}},{key:"max",value:function(){return document.body.clientWidth}},{key:"setColor",value:function(t){"string"==typeof t&&(this.color=t)}},{key:"start",value:function(){this.reset(),this.$progress.css({width:this.max(),transition:this.transition})}},{key:"stop",value:function(){this.$progress.css({width:this.$progress.width()})}},{key:"finish",value:function(){var t=this;this.stop(),this.$progress.css({width:this.max(),transition:"0.5s width"}),this.timer||(this.timer=setTimeout(function(){t.timer=null,t.reset()},700))}},{key:"destroy",value:function(){this.$progress.remove(),this.$progress=null}}]),e}();t("body").on("click","a",function(e){var r=e.currentTarget,o=r.getAttribute("load");if(o){e.preventDefault();var n=r.getAttribute("to");return n?t(n).loadPage({url:o,title:r.innerHTML}):t("jq-router").loadPage({url:o,title:r.innerHTML}),!1}var i=r.hash;if(i){e.preventDefault();var s=i.substr(1),a=t(document.getElementById(s));t("html, body").animate({scrollTop:a.offset().top},300)}}),window.addEventListener("popstate",function(){r()}),t.fn.loadFinish=function(e){var r=t(this);return o(r[0]).push("loadPageCallBacks",e),r},t.fn.loadPage=function(r,n){var i=t(this);if(!i.length)return console.error(i.selector+" not a vaild selector"),i;var s={history:!0,progress:!0,cache:!0,async:!0,title:null};return r=t.extend({},s,r),r.progress&&t.progressBar.start(),t.ajax({dataType:"html",url:r.url,cache:r.cache,async:r.async,timeout:1e4,success:function(n){if(r.history&&"jq-router"===i[0].localName){var s=r.url;"./"===r.url.substring(0,2)&&(s=r.url.substring(2)),history.pushState({title:r.title,id:i.attr("id"),url:r.url},"","#"+s)}if(r.title&&(window.document.title=r.title),i.html(n),"undefined"!=typeof Zepto&&"undefined"==typeof jQuery)for(var a=i.find("script"),l=0;l<a.length;l++){var u=a[l].src;u?t.get(u):t(a[l]).remove()}e();var c=o(i[0]).get("loadPageCallBacks");if(c)for(var h=0;h<c.length;h++)c[h]()},error:function(){console.warn("页面载入失败！")},complete:function(){r.progress&&t.progressBar.finish(),n&&n()}}),i},t.progressBar||(t.progressBar=new n),t(function(){e(),r()})}($);