"use strict";function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var _createClass=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}();/**
 * jQloader  v0.2.3
 * @license  MIT
 * Designed  and built by Moer
 * Homepage  https://moerj.github.io/jQloader
 * GitHub    https://github.com/Moerj/jQloader
 */
if("undefined"==typeof jQuery&&"undefined"==typeof Zepto)throw new Error("jQloader's JavaScript requires jQuery or Zepto");!function(){var t=function(){s&&s.length||(s=$("jq-router").eq(0));for(var t=function(t){var e=$(t),n=e.attr("src");n&&!function(){var t=$("<div></div>");e.replaceWith(t),t.loadPage({url:n,history:!1,progress:!1},function(){t.children().eq(0).unwrap()})}()},e=document.getElementsByTagName("jq-include"),n=0;n<e.length;n++)t(e[n])},e=function(){var t=function(t){var e=t.value;return"false"===e?!1:"true"===e||""===e?!0:e};o.on("click","a",function(e){var n=e.currentTarget,i=n.getAttribute("load");if(i){e.preventDefault();var a=n.getAttribute("to"),u=void 0;u=a?$(a):s;for(var c={},d=n.attributes,h=0;h<d.length;h++){var f=d[h],p=t(f);void 0!==p&&(c[f.nodeName]=p)}return c.url=c.load,c=$.extend({},l,c),void u.loadPage(c)}var g=n.hash;if(g){e.preventDefault();var v=g.substr(1),w=$(document.getElementById(v)),y=r.add(o);return void($.fn.animate?y.animate({scrollTop:w.offset().top+"px"},300):y.scrollTop(w.offset().top))}})},n=function(){var t=history.state,e=document.location.hash.substr(1);if(t){var n=t.url,i=void 0;if(i=t.id?$("#"+t.id):s,!i||!i.length)return;return void i.loadPage({url:n,history:!1,progress:!0,title:t.title})}return e&&s.length?void s.loadPage({url:e,history:!1,progress:!0}):void(a&&window.location.replace(window.location.href))},i=$(window),r=$("html"),o=$("body"),s=void 0,a=!1,l={history:!0,progress:!0,loading:!1,cache:!0,async:!0,title:null,strict:!1},u=function(t){return void 0===t._jQloader&&(t._jQloader={}),{get:function(e){return t._jQloader[e]},set:function(e,n){t._jQloader[e]=n},push:function(e,n){void 0===t._jQloader[e]&&(t._jQloader[e]=[]),t._jQloader[e].push(n)}}},c=function(){function t(){_classCallCheck(this,t),this.color="#58a2d1",this.transition="10s width",this.timer=null,this.$progress=$('<span class="jQloader-ProgressBar"></span>'),this.reset(),r.append(this.$progress)}return _createClass(t,[{key:"reset",value:function(){this.$progress.css({backgroundColor:this.color,transition:"none",height:"2px",width:0,position:"fixed",left:0,top:0,zIndex:9999,boxShadow:"1px 1px 2px 0 "+this.color})}},{key:"max",value:function(){return document.body.clientWidth}},{key:"setColor",value:function(t){"string"==typeof t&&(this.color=t)}},{key:"start",value:function(){this.reset(),this.$progress.css({width:this.max(),transition:this.transition})}},{key:"stop",value:function(){this.$progress.css({width:this.$progress.width()})}},{key:"finish",value:function(){var t=this;this.stop(),this.$progress.css({width:this.max(),transition:"0.5s width"}),this.timer||(this.timer=setTimeout(function(){t.timer=null,t.reset()},700))}}]),t}(),d=function(){function t(){_classCallCheck(this,t),this.$element=$('<div class="jQloader-loading">                                    <div class="loadingBox">                                        <span class="loadingEffect fa fa-spin fa-spinner"></span>                                        <span class="loadingText"> loading...</span>                                    </div>                                </div>'),this.$loadingEffect=this.$element.find(".loadingEffect"),this.$loadingText=this.$element.find(".loadingText"),this.$loadingBox=this.$element.find(".loadingBox"),this.$element.css({width:i.width(),height:i.height(),position:"absolute",zIndex:9999,top:0,left:0,display:"none"}),this.$loadingBox.css({position:"absolute",padding:"5px 15px",top:"50%",left:"50%",transform:"translate3d(-50%,-50%,0)",background:"rgba(0, 0, 0, 0.3)",textAlign:"center",lineHeight:"80px",color:"#fff",fontSize:"16px"}),r.append(this.$element)}return _createClass(t,[{key:"_reSize",value:function(){this.$element.css({width:i.width(),height:i.height()})}},{key:"show",value:function(){this._reSize(),this.$element.show()}},{key:"hide",value:function(){this.$element.hide()}}]),t}();window.addEventListener("popstate",function(){a&&n()}),$.fn.loadFinish=function(t){var e=$(this);return u(e[0]).push("loadPageCallBacks",t),e},$.fn.loadPage=function(e,n){var i=$(this);if(!i.length)throw new Error("'"+this.prevObject.selector+"' not a vaild selector");e=$.extend({},l,e);var r=function(e,n){var r={strict:function(){if(e.strict&&n.indexOf("<script")>=0){var t=window.location.host;window.location.reload(t+"/#"+e.url)}return r},history:function(t){function e(){return t.apply(this,arguments)}return e.toString=function(){return t.toString()},e}(function(){if(e.history){var t=e.url;if("./"===e.url.substring(0,2)&&(t=e.url.substring(2)),"jq-router"===i[0].localName)history.pushState({title:e.title,url:e.url},"","#"+t);else{var n=window.location.hash.split("#"),o=n[1];history.pushState({title:e.title,id:i.attr("id"),url:e.url},"","#"+o+"#"+e.url)}}return r}),title:function(){return e.title&&(window.document.title=e.title),r},render:function(){return i.html(n),r},zepto:function(){if("undefined"!=typeof Zepto&&"undefined"==typeof jQuery)for(var t=i.find("script"),e=0;e<t.length;e++){var n=t[e].src;n?$.get(n):$(t[e]).remove()}return r},compile:function(){return t(),r},callbacks:function(){var t=u(i[0]).get("loadPageCallBacks");if(t)for(var e=0;e<t.length;e++)t[e]();return r}};return r};return e.progress&&!e.strict&&$.progressBar.start(),e.loading&&$.loadingMask.show(),$.ajax({dataType:"html",url:e.url,cache:e.cache,async:e.async,timeout:1e4,success:function(t){r(e,t).strict().history().title().render().zepto().compile().callbacks()},error:function(){console.warn("页面载入失败！")},complete:function(){e.progress&&!e.strict&&$.progressBar.finish(),e.loading&&$.loadingMask.hide(),n&&n()}}),i},$(function(){$.progressBar=new c,$.loadingMask=new d,e(),t(),n(),a=!0})}();