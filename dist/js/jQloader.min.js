"use strict";function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var _createClass=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}();/**
 * jQloader  v0.1.4
 * @license  MIT
 * Designed  and built by Moer
 * Homepage  https://moerj.github.io/jQloader
 * GitHub    https://github.com/Moerj/jQloader
 */
!function(t){function e(){for(var e=function(e){var r=t(e),n=r.attr("src");n&&!function(){var e=t("<div></div>");r.replaceWith(e),e.loadPage({url:n,history:!1,progress:!1},function(){e.children().eq(0).unwrap()})}()},r=document.getElementsByTagName("jq-include"),n=0;n<r.length;n++)e(r[n])}function r(){t("body").on("click","a",function(e){var r=e.currentTarget,n=r.getAttribute("load");if(n){e.preventDefault();var i=r.getAttribute("to"),o=void 0,s=!1;return o=t(i?i:"jq-router"),null!=r.getAttribute("strict")&&(s=!0),void o.loadPage({url:n,title:r.title,strict:s})}var a=r.hash;if(a){e.preventDefault();var l=a.substr(1),c=t(document.getElementById(l));return void t("html, body").animate({scrollTop:c.offset().top},300)}})}function n(){var e=history.state,r=document.location.hash.substr(1);if(e){var n=e.url,i=void 0;if(i=t(e.id?"#"+e.id:"jq-router"),!i.length)return;return void i.loadPage({url:n,history:!1,progress:!0,title:e.title})}if(r){var o=t("jq-router");if(!o.length)return;return void o.loadPage({url:r,history:!1,progress:!0})}var s=sessionStorage.getItem("jqRouterReload");s?sessionStorage.removeItem("jqRouterReload"):(sessionStorage.setItem("jqRouterReload",!0),window.location.replace(window.location.href))}var i=function(t){return void 0===t._jQloader&&(t._jQloader=new Map),{get:function(e){return t._jQloader[e]},set:function(e,r){t._jQloader[e]=r},push:function(e,r){void 0===t._jQloader[e]&&(t._jQloader[e]=[]),t._jQloader[e].push(r)}}},o=function(){function e(){_classCallCheck(this,e),this.color="#58a2d1",this.transition="10s width",this.timer=null,this.$progress=t('<span class="jQloader-ProgressBar"></span>'),this.reset(),t("html").append(this.$progress)}return _createClass(e,[{key:"reset",value:function(){this.$progress.css({backgroundColor:this.color,transition:"none",height:"2px",width:0,position:"fixed",left:0,top:0,zIndex:9999,boxShadow:"1px 1px 2px 0 "+this.color})}},{key:"max",value:function(){return document.body.clientWidth}},{key:"setColor",value:function(t){"string"==typeof t&&(this.color=t)}},{key:"start",value:function(){this.reset(),this.$progress.css({width:this.max(),transition:this.transition})}},{key:"stop",value:function(){this.$progress.css({width:this.$progress.width()})}},{key:"finish",value:function(){var t=this;this.stop(),this.$progress.css({width:this.max(),transition:"0.5s width"}),this.timer||(this.timer=setTimeout(function(){t.timer=null,t.reset()},700))}},{key:"destroy",value:function(){this.$progress.remove(),this.$progress=null}}]),e}(),s=function(){function e(){_classCallCheck(this,e),this.$element=t('<div class="jQloader-loading"><div class="loadingBox">                                    <span class="loadingEffect fa fa-spin fa-spinner"></span>                                    <span class="loadingText"> loading...</span>                                </div></div>'),this.$loadingEffect=this.$element.find(".loadingEffect"),this.$loadingText=this.$element.find(".loadingText"),this.$loadingBox=this.$element.find(".loadingBox");var r=t(window);this.$element.css({width:r.width(),height:r.height(),position:"absolute",top:0,left:0,display:"none"}),this.$loadingBox.css({position:"absolute",padding:"5px 15px",top:"50%",left:"50%",transform:"translate3d(-50%,-50%,0)",background:"rgba(0, 0, 0, 0.3)",textAlign:"center",lineHeight:"80px",color:"#fff",fontSize:"16px"}),t("html").append(this.$element)}return _createClass(e,[{key:"lock",value:function(){this.$element.show()}},{key:"unlock",value:function(){this.$element.hide()}}]),e}();window.addEventListener("popstate",function(){n()}),t.fn.loadFinish=function(e){var r=t(this);return i(r[0]).push("loadPageCallBacks",e),r},t.fn.loadPage=function(r,n){var o=t(this);if(!o.length)return console.error(o.selector+" not a vaild selector"),o;var s={history:!0,progress:!0,lock:!1,cache:!0,async:!0,title:null,strict:!1};r=t.extend({},s,r);var a=function(r,n){var s={strict:function(){if(r.strict&&n.indexOf("<script")>=0){var t=window.location.host;window.location.reload(t+"/#"+r.url)}return s},history:function(t){function e(){return t.apply(this,arguments)}return e.toString=function(){return t.toString()},e}(function(){if(r.history){var t=r.url;if("./"===r.url.substring(0,2)&&(t=r.url.substring(2)),"jq-router"===o[0].localName)history.pushState({title:r.title,url:r.url},"","#"+t);else{var e=window.location.hash.split("#"),n=e[1];history.pushState({title:r.title,id:o.attr("id"),url:r.url},"","#"+n+"#"+r.url)}}return s}),title:function(){return r.title&&(window.document.title=r.title),s},render:function(){return o.html(n),s},zepto:function(){if("undefined"!=typeof Zepto&&"undefined"==typeof jQuery)for(var e=o.find("script"),r=0;r<e.length;r++){var n=e[r].src;n?t.get(n):t(e[r]).remove()}return s},compile:function(){return e(),s},callbacks:function(){var t=i(o[0]).get("loadPageCallBacks");if(t)for(var e=0;e<t.length;e++)t[e]();return s}};return s};return r.progress&&!r.strict&&t.progressBar.start(),r.lock&&t.loadingLock.lock(),t.ajax({dataType:"html",url:r.url,cache:r.cache,async:r.async,timeout:1e4,success:function(t){a(r,t).strict().history().title().render().zepto().compile().callbacks()},error:function(){console.warn("页面载入失败！")},complete:function(){r.progress&&!r.strict&&t.progressBar.finish(),r.lock&&t.loadingLock.unlock(),n&&n()}}),o},t.progressBar||(t.progressBar=new o),t.loadingLock||(t.loadingLock=new s),t(function(){r(),e(),n()})}($);