{"version":3,"sources":["jQloader.js"],"names":[],"mappings":"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","file":"jQloader.js","sourcesContent":["/**\n * jQloader  v0.2.3\n * @license  MIT\n * Designed  and built by Moer\n * Homepage  https://moerj.github.io/jQloader\n * GitHub    https://github.com/Moerj/jQloader\n */\n\nif (typeof jQuery === 'undefined' && typeof Zepto === 'undefined') {\n    throw new Error('jQloader\\'s JavaScript requires jQuery or Zepto')\n}\n\n{\n\n    const $window = $(window);\n    const $html = $('html');\n    const $body = $('body');\n    let $router;\n    let _jQloader_isReady = false; //当前组件初始化状态\n\n    const OPTS_DEFAULT = {\n        history: true,\n        progress: true,\n        loading: false,\n        cache: true,\n        async: true,\n        title: null,\n        // strict: true, 开启严格模式，\n        // 加载的 ajax 页面有 script 脚本时会强制重载当前页，\n        // 用于清空页面所有ajax 残留 js，防止 js 重复绑定等问题\n        strict: false\n    }\n\n\n    // jQloader的存储机制 \n    const JQloader = (dom) => {\n        if (dom._jQloader === undefined) {\n            dom._jQloader = {}\n        }\n        return {\n            get: (key) => {\n                return dom._jQloader[key]\n            },\n            set: (key, val) => {\n                dom._jQloader[key] = val\n            },\n            push: (key, val) => {\n                if (dom._jQloader[key] === undefined) {\n                    dom._jQloader[key] = []\n                }\n                dom._jQloader[key].push(val)\n            }\n        }\n    }\n\n    // 进度条\n    class ProgressBar {\n        constructor() {\n            this.color = '#58a2d1';\n            this.transition = '10s width';\n            this.timer = null;\n            this.$progress = $('<span class=\"jQloader-ProgressBar\"></span>');\n            this.reset();\n            $html.append(this.$progress);\n        }\n        reset() {\n            this.$progress.css({\n                backgroundColor: this.color,\n                transition: 'none',\n                height: '2px',\n                width: 0,\n                position: 'fixed',\n                left: 0,\n                top: 0,\n                zIndex: 9999,\n                boxShadow: '1px 1px 2px 0 ' + this.color\n            });\n        }\n        max() {\n            return document.body.clientWidth\n        }\n        setColor(color) {\n            if (typeof color === 'string') {\n                this.color = color;\n            }\n        }\n        start() {\n            this.reset();\n            this.$progress.css({\n                width: this.max(),\n                transition: this.transition\n            });\n        }\n        stop() {\n            this.$progress.css({\n                width: this.$progress.width()\n            });\n        }\n        finish() {\n            this.stop();\n            this.$progress.css({\n                width: this.max(),\n                transition: '0.5s width'\n            });\n            if (!this.timer) {\n                this.timer = setTimeout(() => {\n                    this.timer = null;\n                    this.reset();\n                }, 700)\n            }\n        }\n    }\n\n    // 容器加载 loading 效果\n    class Loading {\n        constructor() {\n            this.$element = $('<div class=\"jQloader-loading\">\\\n                                    <div class=\"loadingBox\">\\\n                                        <span class=\"loadingEffect fa fa-spin fa-spinner\"></span>\\\n                                        <span class=\"loadingText\"> loading...</span>\\\n                                    </div>\\\n                                </div>');\n            this.$loadingEffect = this.$element.find('.loadingEffect');\n            this.$loadingText = this.$element.find('.loadingText');\n            this.$loadingBox = this.$element.find('.loadingBox');\n\n            this.$element.css({\n                width: $window.width(),\n                height: $window.height(),\n                position: 'absolute',\n                zIndex: 9999,\n                top: 0,\n                left: 0,\n                display: 'none'\n            })\n            this.$loadingBox.css({\n                position: 'absolute',\n                padding: '5px 15px',\n                top: '50%',\n                left: '50%',\n                transform: 'translate3d(-50%,-50%,0)',\n                background: 'rgba(0, 0, 0, 0.3)',\n                textAlign: 'center',\n                lineHeight: '80px',\n                color: '#fff',\n                fontSize: '16px'\n            })\n\n            $html.append(this.$element);\n        }\n        _reSize() {\n            this.$element.css({\n                width: $window.width(),\n                height: $window.height()\n            });\n        }\n        show() {\n            this._reSize();\n            this.$element.show();\n        }\n        hide() {\n            this.$element.hide();\n        }\n    }\n\n\n\n    // 编译当前页面 html 标签上的 loadPage 指令\n    function _compile() {\n\n        // 检测路由容器\n        if (!$router || !$router.length) {\n            $router = $('jq-router').eq(0);\n        }\n\n        // 编译include\n        const _compile_jqInclude = (dom) => {\n            let $dom = $(dom);\n            let url = $dom.attr('src');\n            if (url) {\n                let $container = $('<div></div>');\n                $dom.replaceWith($container);\n                $container.loadPage({\n                    url: url,\n                    history: false,\n                    progress: false\n                }, () => {\n                    // 编译并ajax加载完成后的回调\n                    $container.children().eq(0).unwrap();\n                })\n            }\n        }\n        let includeDoms = document.getElementsByTagName('jq-include');\n        for (let i = 0; i < includeDoms.length; i++) {\n            _compile_jqInclude(includeDoms[i])\n        }\n\n    }\n\n\n    // 拦截并重写 a 标签事件\n    function _reWriteLinks() {\n\n        // 判断标签上的属性是否合法，允许默认布尔值，无参数时为 true\n        //  例如：<a strict></a> === <a strict=\"true\"></a>\n        const isAttr = (attributeObj) => {\n            let value = attributeObj.value;\n            if (value === \"false\") {\n                return false;\n            } else if (value === \"true\" || value === '') {\n                return true;\n            } else {\n                return value\n            }\n        }\n\n        $body.on('click', 'a', (e) => {\n            let a = e.currentTarget;\n\n            // load 类型\n            let loadUrl = a.getAttribute('load');\n            if (loadUrl) {\n                e.preventDefault();\n\n                let container = a.getAttribute('to');\n                let $container;\n\n                if (container) {\n                    $container = $(container)\n                } else {\n                    $container = $router\n                }\n\n                let opts = {};\n                let attrs = a.attributes;\n\n                // 将所有属性遍历，并拼装成对象\n                for (let i = 0; i < attrs.length; i++) {\n                    let attr = attrs[i];\n                    let res = isAttr(attr);\n                    if (res !== undefined) {\n                        opts[attr.nodeName] = res;\n                    }\n                }\n\n                // 需要请求的 url 就是 load 属性的值\n                opts.url = opts.load;\n\n                opts = $.extend({}, OPTS_DEFAULT, opts);\n\n\n                $container.loadPage(opts);\n\n                return;\n            }\n\n            // 锚点类型\n            let hash = a.hash;\n            if (hash) {\n                e.preventDefault();\n                let id = hash.substr(1);\n                // 用原生 js 获取 dom，因为jQuery $('')选择器获取中文的id会忽略空格。\n                let $anchor = $(document.getElementById(id));\n                let $win = $html.add($body);\n                // 滚动到锚点元素\n                if ($.fn.animate) {\n                    $win.animate({\n                        scrollTop: $anchor.offset().top + 'px'\n                    }, 300);\n                } else {\n                    $win.scrollTop($anchor.offset().top);\n                }\n\n                return;\n            }\n\n        })\n\n    }\n\n    // 载入历史记录\n    function _loadHitory() {\n        let historyData = history.state;\n        let locationHash = document.location.hash.substr(1);\n\n        if (historyData) {\n            let url = historyData.url\n            let $container;\n\n            // 指定读取历史页面的容器\n            if (historyData.id) {\n                $container = $('#' + historyData.id)\n            } else {\n                $container = $router\n            }\n\n            if (!$container || !$container.length) {\n                return;\n            }\n\n            $container.loadPage({\n                url: url,\n                history: false,\n                progress: true,\n                title: historyData.title\n            });\n\n            return;\n        }\n\n        if (locationHash && $router.length) {\n\n            $router.loadPage({\n                url: locationHash,\n                history: false,\n                progress: true\n            });\n\n            return;\n        }\n\n        // 没有 url 参数，代表当前回到无路由页面\n        // 强制刷新一次，释放内存，也让它真正回到首页\n        if (_jQloader_isReady) {\n            window.location.replace(window.location.href);\n        }\n    }\n\n    // popstate 地址栏改变事件，浏览器前进、后退、手动修改地址栏\n    // 注意 history.pushState 不会触发该事件\n    window.addEventListener(\"popstate\", () => {\n        if (_jQloader_isReady) {\n            _loadHitory()\n        }\n    });\n\n\n    // 暴露的公共方法 ==============================\n\n    // loadPage 加载完后的回调组，用于指令触发load后的回调\n    $.fn.loadFinish = function(call_back) {\n        let container = $(this);\n        JQloader(container[0]).push('loadPageCallBacks', call_back)\n        return container\n    }\n\n    // 加载一个页面\n    $.fn.loadPage = function(OPTS, call_back) {\n        let $container = $(this);\n\n        if (!$container.length) {\n            throw new Error('\\'' + this.prevObject.selector + '\\' not a vaild selector');\n        }\n\n        OPTS = $.extend({}, OPTS_DEFAULT, OPTS);\n\n        // ajax 请求完成后的一些列链式流程\n        const _todo = (OPTS, data) => {\n            let _this = {\n                strict: () => {\n                    // 严格模式强制重载有 js 的 ajax 页面\n                    if (OPTS.strict && data.indexOf('<script') >= 0) {\n                        let host = window.location.host;\n                        window.location.reload(host + '/#' + OPTS.url);\n                    }\n                    return _this;\n                },\n                history: () => {\n                    // 记录浏览器历史\n                    if (OPTS.history) {\n                        // 处理 url 格式，浏览器地址栏去掉./开头\n                        let url = OPTS.url;\n                        if (OPTS.url.substring(0, 2) === './') {\n                            url = OPTS.url.substring(2)\n                        }\n\n                        // 浏览器地址栏操作\n                        // 路由 url 以#号开头，拼接在当前 url 后面\n                        if ($container[0].localName === 'jq-router') {\n                            // 一级路由 url\n                            history.pushState({\n                                title: OPTS.title,\n                                url: OPTS.url\n                            }, '', '#' + url);\n                        } else {\n                            // 二级路由 url\n                            // 加载容器非路由，需记录 id   请求的 url 拼接在当前路由地址后面\n                            let hashList = window.location.hash.split(\"#\");\n                            let routerUrl = hashList[1];\n                            history.pushState({\n                                title: OPTS.title,\n                                id: $container.attr('id'),\n                                url: OPTS.url\n                            }, '', '#' + routerUrl + '#' + OPTS.url);\n                        }\n                    }\n                    return _this;\n                },\n                title: () => {\n                    // 修改页面 title\n                    if (OPTS.title) {\n                        window.document.title = OPTS.title;\n                    }\n                    return _this;\n                },\n                render: () => {\n                    // 写入页面\n                    $container.html(data);\n                    return _this;\n                },\n                zepto: () => {\n                    // 解决Zepto ajxa 请求到的页面 script 标签执行问题\n                    if (typeof Zepto != 'undefined' && typeof jQuery == 'undefined') {\n                        let script = $container.find('script');\n                        for (let i = 0; i < script.length; i++) {\n                            let src = script[i].src;\n                            if (src) {\n                                // Zepto不会运行外联script\n                                $.get(src)\n                            } else {\n                                // Zepto会执行两次页面的内联script\n                                $(script[i]).remove()\n                            }\n                        }\n                    }\n                    return _this;\n                },\n                compile: () => {\n                    // 编译新页面上的指令\n                    _compile();\n                    return _this;\n                },\n                callbacks: () => {\n                    // 运行容器上的回调方法组\n                    let callBacks = JQloader($container[0]).get('loadPageCallBacks');\n                    if (callBacks) {\n                        for (var i = 0; i < callBacks.length; i++) {\n                            callBacks[i]();\n                        }\n                    }\n                    return _this;\n                }\n\n            }\n            return _this;\n        }\n\n        // 开启 loading 进度条\n        if (OPTS.progress && !OPTS.strict) {\n            $.progressBar.start();\n        }\n\n        // 开启 loading 锁定\n        if (OPTS.loading) {\n            $.loadingMask.show();\n        }\n\n\n        // 请求页面\n        $.ajax({\n            dataType: 'html',\n            url: OPTS.url,\n            cache: OPTS.cache,\n            async: OPTS.async,\n            timeout: 10000,\n            success: (data) => {\n\n                _todo(OPTS, data)\n                    .strict()\n                    .history()\n                    .title()\n                    .render()\n                    .zepto()\n                    .compile()\n                    .callbacks();\n\n            },\n            error: () => {\n                console.warn('页面载入失败！');\n            },\n            complete: () => {\n                // 进度条结束\n                if (OPTS.progress && !OPTS.strict) {\n                    $.progressBar.finish();\n                }\n\n                // 关闭锁定\n                if (OPTS.loading) {\n                    $.loadingMask.hide();\n                }\n\n                // 本次 ajax 的回调\n                if (call_back) call_back();\n            }\n        })\n\n        return $container;\n    }\n\n\n\n\n    $(() => { // jQloader所在页面/首页初始化 dom 完毕\n\n        // 创建并暴露 进度条\n        $.progressBar = new ProgressBar();\n\n        // 创建并暴露 loading蒙层\n        $.loadingMask = new Loading();\n\n        // 重写 a 标签事件\n        _reWriteLinks();\n\n        // 执行一次编译\n        _compile();\n\n        // 请求一次浏览器历史\n        _loadHitory();\n\n        // 组件加载完成\n        _jQloader_isReady = true;\n\n    })\n\n}"],"sourceRoot":"/source/"}